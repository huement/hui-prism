// =============================================================================
// Base16 Color Schemes
// =============================================================================
// Modern Sass implementation of Base16 color schemes with support for
// multiple themes and custom color overrides.

@use 'sass:map';
@use 'sass:color';
@use 'sass:meta';


// =============================================================================
// Color Scheme Definitions
// =============================================================================

/// Hui Prism dark color palette (default)
/// @type Map
$hui-prism-dark-scheme: (
  'base00': #212121,
  'base01': #2d2d2d,
  'base02': #a8a8a8,
  'base03': #545454,
  'base04': #6e6e6e,
  'base05': #adadad,
  'base06': #d0d0d0,
  'base07': #e6e6e6,
  'base08': #ff0054,
  'base09': #fd7e47,
  'base0a': #fbff12,
  'base0b': #3bfc43,
  'base0c': #02e5ac,
  'base0d': #0fb4f0,
  'base0e': #1982c4,
  'base0f': #9b47fa) !default;

/// Hui Prism light color palette
/// @type Map
$hui-prism-light-scheme: (
  'base00': #f6f8fa,
  'base01': #e1e4e8,
  'base02': #6a737d,
  'base03': #c1c8cd,
  'base04': #d0d7de,
  'base05': #24292e,
  'base06': #1b1f23,
  'base07': #0f141a,
  'base08': #d73a49,
  'base09': #e36209,
  'base0a': #ffeb3b,
  'base0b': #22863a,
  'base0c': #005cc5,
  'base0d': #032f62,
  'base0e': #6f42c1,
  'base0f': #cb2431) !default;

// =============================================================================
// Color Scheme Registry
// =============================================================================

/// Registry of available schemes (extend via `@use ... with`)
/// @type Map
$scheme-registry: (
  'default': $hui-prism-dark-scheme,
  'dark': $hui-prism-dark-scheme,
  'light': $hui-prism-light-scheme) !default;

// =============================================================================
// Color Utility Functions
// =============================================================================

/// Get a color scheme by name
/// @param {String} $scheme-name - Name of the color scheme
/// @return {Map} Color scheme map
@function get-color-scheme($scheme-name: 'default') {
  @if not map.has-key($scheme-registry, $scheme-name) {
    @error "Color scheme '#{$scheme-name}' not found. Available schemes: #{map.keys($scheme-registry)}";
  }

  @return map.get($scheme-registry, $scheme-name
);
}

/// Get a specific color from a scheme
/// @param {String} $scheme-name - Name of the color scheme
/// @param {String} $color-name - Name of the color (e.g., 'base00', 'base08')
/// @return {Color} The color value
@function get-color($scheme-name: 'default', $color-name: 'base00') {
  $scheme: get-color-scheme($scheme-name);

  @if not map.has-key($scheme, $color-name) {
    @error "Color '#{$color-name}' not found in scheme '#{$scheme-name}'. Available colors: #{map.keys($scheme)}";
  }

  @return map.get($scheme, $color-name);
}

/// Create a color variant with opacity
/// @param {Color} $color - Base color
/// @param {Number} $opacity - Opacity value (0-1)
/// @return {Color} Color with opacity
@function color-with-opacity($color, $opacity: 1) {
  @return color.change($color, $alpha: $opacity);
}

/// Create a lighter variant of a color
/// @param {Color} $color - Base color
/// @param {Number} $amount - Lightness amount (0-100)
/// @return {Color} Lighter color
@function lighten-color($color, $amount: 10%) {
  @return color.adjust($color, $lightness: $amount);
}

/// Create a darker variant of a color
/// @param {Color} $color - Base color
/// @param {Number} $amount - Darkness amount (0-100)
/// @return {Color} Darker color
@function darken-color($color, $amount: 10%) {
  @return color.adjust($color, $lightness: -$amount);
}

/// Get contrasting color (black or white) for a given background
/// @param {Color} $color - Background color
/// @return {Color} Contrasting color
@function get-contrast-color($color) {
  $lightness: color.lightness($color);
  @return if($lightness > 50%, #000000, #ffffff);
}

/// Create a color palette from a base color
/// @param {Color} $base-color - Base color
/// @param {Number} $steps - Number of steps in the palette
/// @return {List} List of colors
@function create-palette($base-color, $steps: 5) {
  $palette: (
  );
$step-size: 100% / ($steps - 1);

@for $i from 0 through ($steps - 1) {
  $lightness: $i * $step-size;
  $palette: append($palette, color.adjust($base-color, $lightness: $lightness));
}

@return $palette;
}

// =============================================================================
// Color Scheme Mixins
// =============================================================================

/// Apply a color scheme as CSS custom properties
/// @param {String} $scheme-name - Name of the color scheme
/// @param {String} $prefix - CSS custom property prefix
@mixin apply-color-scheme($scheme-name: 'default', $prefix: '--base16') {
  $scheme: get-color-scheme($scheme-name);

  @each $name, $color in $scheme {
    #{$prefix}-#{$name}: #{$color};
  }
}

/// Create a theme variant with custom colors
/// @param {Map} $base-scheme - Base color scheme
/// @param {Map} $overrides - Color overrides
/// @return {Map} Modified color scheme
@function create-theme-variant($base-scheme, $overrides: ()) {
  @return map.merge($base-scheme, $overrides);
}